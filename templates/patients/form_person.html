{% extends 'base.html' %}
{% from 'macros/_forms.html' import text_input, textarea_input %}
{% from 'macros/_cards.html' import auth_card %}
{% from 'macros/_buttons.html' import form_buttons %}

{% block title %}{% if editing %}Editar{% else %}Nuevo{% endif %} Paciente - Terapia{% endblock %}

{% block main %}
    {% if editing %}
        {% set card_icon = 'person-gear' %}
        {% set card_title = 'Editar Paciente' %}
        {% set card_subtitle = 'Actualiza la informaci√≥n del paciente' %}
        {% set submit_text = 'Guardar Cambios' %}
    {% else %}
        {% set card_icon = 'person-plus' %}
        {% set card_title = 'Nuevo Paciente' %}
        {% set card_subtitle = 'Registra un nuevo paciente en el sistema' %}
        {% set submit_text = 'Agregar Paciente' %}
    {% endif %}

    {% call auth_card(card_icon, card_title, card_subtitle, max_width='500px') %}
        <form method="post">
            {{ form.hidden_tag() }}
            
            {{ text_input(form.name, label='Nombre del Paciente', icon='person', placeholder='Nombre completo', autocomplete='name') }}
            
            {% if form.notes is defined %}
                {{ textarea_input(form.notes, label='Notas (opcional)', icon='journal-text', rows=3, placeholder='Notas adicionales...') }}
            {% endif %}

            {{ form_buttons(submit_text, submit_icon='check-lg', cancel_url=url_for('patients.index')) }}
        </form>
    {% endcall %}
{% endblock main %}
