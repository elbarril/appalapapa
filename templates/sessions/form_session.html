{% extends 'base.html' %}
{% from 'macros/_forms.html' import select_input, date_input, number_input, checkbox_input, textarea_input %}
{% from 'macros/_cards.html' import auth_card %}
{% from 'macros/_buttons.html' import form_buttons %}

{% block title %}Nueva Sesión - Terapia{% endblock %}

{% block main %}
    {% call auth_card('calendar-plus', 'Nueva Sesión', 'Registra una nueva sesión de terapia', max_width='500px') %}
        <form method="post">
            {{ form.hidden_tag() }}
            
            {{ select_input(form.person_id, label='Paciente', icon='person') }}
            {{ date_input(form.session_date, label='Fecha de la Sesión', icon='calendar-date') }}
            {{ number_input(form.session_price, label='Precio de la Sesión', icon='currency-dollar', step='0.01', min='0') }}
            
            {% if form.pending is defined %}
                {{ checkbox_input(form.pending, label='Pago pendiente', icon='clock-history') }}
            {% endif %}
            
            {% if form.notes is defined %}
                {{ textarea_input(form.notes, label='Notas (opcional)', icon='journal-text', rows=2, placeholder='Notas de la sesión...') }}
            {% endif %}

            {{ form_buttons('Agregar Sesión', submit_icon='check-lg', cancel_url=url_for('patients.index')) }}
        </form>
    {% endcall %}
{% endblock main %}
